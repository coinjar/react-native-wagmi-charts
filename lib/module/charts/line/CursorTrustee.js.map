{"version":3,"sources":["CursorTrustee.tsx"],"names":["React","Platform","View","StyleSheet","Animated","useAnimatedStyle","useAnimatedProps","withSpring","Svg","Line","SVGLine","LineChartCursor","LineChartDimensionsContext","useLineChart","LineChartCursorTrustee","displayName","AnimatedSvgLine","createAnimatedComponent","children","color","horizontalLineColor","verticalLineColor","size","outerSize","crosshairWrapperProps","crosshairProps","crosshairOuterProps","lineVerticalProps","lineHorizontalProps","props","height","width","useContext","currentX","currentY","isActive","enableSpringAnimation","setEnableSpringAnimation","useState","OS","useEffect","setTimeout","animatedCursorStyle","transform","translateX","value","translateY","scale","damping","horizontal","opacity","vertical","vertical2","y1","alignItems","justifyContent","zIndex","style","backgroundColor","borderRadius","position","absoluteFillObject"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Platform, View, ViewProps, StyleSheet } from 'react-native';\nimport Animated, {\n  useAnimatedStyle,\n  useAnimatedProps,\n  withSpring,\n} from 'react-native-reanimated';\nimport Svg, { Line as SVGLine, LineProps } from 'react-native-svg';\n\nimport { LineChartCursor, LineChartCursorProps } from './Cursor';\nimport { LineChartDimensionsContext } from './Chart';\nimport { useLineChart } from './useLineChart';\n\ntype LineChartCursorTrusteeProps = Omit<\n  LineChartCursorProps,\n  'children' | 'type'\n> & {\n  children?: React.ReactNode;\n  color?: string;\n  horizontalLineColor?: string;\n  verticalLineColor?: string;\n  size?: number;\n  outerSize?: number;\n  crosshairWrapperProps?: Animated.AnimateProps<ViewProps>;\n  crosshairProps?: ViewProps;\n  crosshairOuterProps?: ViewProps;\n  lineVerticalProps?: Partial<LineProps>;\n  lineHorizontalProps?: Partial<LineProps>;\n};\n\nLineChartCursorTrustee.displayName = 'LineChartCursorTrustee';\n\nconst AnimatedSvgLine = Animated.createAnimatedComponent(SVGLine);\n\nexport function LineChartCursorTrustee({\n  children,\n  color = 'black',\n  horizontalLineColor = 'green',\n  verticalLineColor = 'orange',\n  size = 8,\n  outerSize = 32,\n  crosshairWrapperProps = {},\n  crosshairProps = {},\n  crosshairOuterProps = {},\n  lineVerticalProps = {},\n  lineHorizontalProps = {},\n  ...props\n}: LineChartCursorTrusteeProps) {\n  const { height, width } = React.useContext(LineChartDimensionsContext);\n  const { currentX, currentY, isActive } = useLineChart();\n\n  // It seems that enabling spring animation on initial render on Android causes a crash.\n  const [enableSpringAnimation, setEnableSpringAnimation] = React.useState(\n    Platform.OS === 'ios'\n  );\n  React.useEffect(() => {\n    setTimeout(() => {\n      setEnableSpringAnimation(true);\n    }, 100);\n  }, []);\n\n  const animatedCursorStyle = useAnimatedStyle(() => ({\n    transform: [\n      { translateX: currentX.value - outerSize / 2 },\n      { translateY: currentY.value - outerSize / 2 },\n      {\n        scale: enableSpringAnimation\n          ? withSpring(isActive.value ? 1 : 0, {\n              damping: 10,\n            })\n          : 0,\n      },\n    ],\n  }));\n\n  const horizontal = useAnimatedStyle(() => ({\n    opacity: isActive.value ? 1 : 0,\n    transform: [{ translateY: currentY.value }],\n  }));\n\n  const vertical = useAnimatedStyle(() => ({\n    opacity: isActive.value ? 1 : 0,\n    transform: [{ translateX: currentX.value }],\n  }));\n\n  const vertical2 = useAnimatedProps(() => ({\n    y1: currentY.value || 0,\n  }));\n\n  return (\n    <LineChartCursor type=\"trustee\" {...props}>\n      <Animated.View\n        {...crosshairWrapperProps}\n        style={[\n          {\n            width: outerSize,\n            height: outerSize,\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: 5,\n          },\n          animatedCursorStyle,\n          crosshairWrapperProps.style,\n        ]}\n      >\n        <View\n          {...crosshairOuterProps}\n          style={[\n            {\n              backgroundColor: color,\n              width: outerSize,\n              height: outerSize,\n              borderRadius: outerSize,\n              opacity: 0.1,\n              position: 'absolute',\n            },\n            crosshairOuterProps.style,\n          ]}\n        />\n        <View\n          {...crosshairProps}\n          style={[\n            {\n              backgroundColor: color,\n              width: size,\n              height: size,\n              borderRadius: size,\n            },\n            crosshairProps.style,\n          ]}\n        />\n      </Animated.View>\n      <Animated.View\n        style={[horizontal, { ...StyleSheet.absoluteFillObject, width: width }]}\n      >\n        <Svg>\n          <SVGLine\n            x1={0}\n            y1={0}\n            x2={width}\n            y2={0}\n            strokeWidth={2}\n            stroke={horizontalLineColor}\n            {...lineHorizontalProps}\n          />\n        </Svg>\n      </Animated.View>\n      <Animated.View style={[vertical, { ...StyleSheet.absoluteFillObject }]}>\n        <Svg>\n          <AnimatedSvgLine\n            x1={0}\n            y1={0}\n            x2={0}\n            y2={height}\n            strokeWidth={2}\n            stroke={verticalLineColor}\n            animatedProps={vertical2}\n            {...lineVerticalProps}\n          />\n        </Svg>\n      </Animated.View>\n      {children}\n    </LineChartCursor>\n  );\n}\n"]}